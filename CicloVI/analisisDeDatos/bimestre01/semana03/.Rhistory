print(n = Inf)
#Corregimos el nombre del pais Bolivia (Plurinational State of) a Bolivia
#Corregimos el nombre del pais Dominican Republic a Republica Dominicana
#Corregimos el nombre del pais Brazil a Brasil
datosCrimenesLatinoamerica <- datosCrimenesLatinoamerica %>%
mutate(pais = case_when(
pais == "Bolivia (Plurinational State of)" ~ "Bolivia",
pais == "Dominican Republic" ~ "Republica Dominicana",
pais == "Venezuela (Bolivarian Republic of)" ~ "Venezuela",
pais == "Brazil" ~ "Brasil",
TRUE ~ pais
))
#Filtramos los paises del DataFrame datosCrimenesLatinoamerica en base al vector de paisesLatinoamerica
datosCrimenesLatinoamerica <- datosCrimenesLatinoamerica %>%
filter(pais %in% paisesLatinoamerica)
#Verificamos la estructura del DataFrame final
str(datosCrimenesLatinoamerica)
datosCrimenesLatinoamerica = datosCrimenesLatinoamerica %>%
mutate(valor = round(valor, 2))
datosCrimenesLatinoamerica %>%
distinct(pais)
dataSet = contenidoApi %>%
left_join(sueldos_Basicos, by = c(nombrePais = "pais"))
dataSet = dataSet %>%
left_join(datosCrimenesLatinoamerica, by = c(nombrePais = "pais"))
str(dataSet)
# LIMPIEZA
# ONU
dataSet = dataSet %>%
mutate(
ONU = as.character(ONU),
ONU = case_when(
ONU == "TRUE" ~ "Si",
ONU == "FALSE" ~ "No",
TRUE ~ ONU
)
)
# LIMPIEZA
# PAIS INDEPENDIENTE
dataSet = dataSet %>%
mutate(
paisIndependiente = as.character(paisIndependiente),
paisIndependiente = case_when(
paisIndependiente == "TRUE" ~ "Si",
paisIndependiente == "FALSE" ~ "No",
TRUE ~ paisIndependiente
)
)
# LIMPIEZA
# TIENE MAR
dataSet = dataSet %>%
mutate(
tieneMar = as.character(tieneMar),
tieneMar = case_when(
tieneMar == "TRUE" ~ "Si",
tieneMar == "FALSE" ~ "No",
TRUE ~ tieneMar
)
)
# TRANSFORMACION
# Decadas 2014 - 2023
dataSet = dataSet %>%
mutate(
decada = case_when(
anio >= 2010 & anio <= 2019 ~ 2010,
anio >= 2020 & anio <= 2029 ~ 2020,
TRUE ~ anio
)
)
# ENRIQUECIMIENTO
# Creacion de la variable densidadPlobacional = poblacion/areaPais
dataSet = dataSet %>%
mutate(densidadPoblacional = round(poblacion / areaPais, 2))
#
dataSet = dataSet %>%
select(bandera,
codigo_ISO,
nombrePais,
capitalPais,
continente,
regionPais,
subregionPais,
paisIndependiente,
tieneMar,
ONU,
latitud,
longitud,
areaPais,
poblacion,
sueldoMinimo_USD,
salarioMinimoPorHora_USD,
indicador,
dimension,
categoria,
anio,
decada,
unidad,
valorIndicador = valor)
rm(list = ls())
library("httr")
library("jsonlite")
library("dplyr")
library("tidyr")
library(readxl)
library(rvest)
url = "https://restcountries.com/v3.1/region/americas"
rpta = GET(url)
class(rpta)
status_code(rpta)
contJson = content(rpta, "text", encoding = "UTF-8")
contenidoApi = fromJSON(contJson, flatten = TRUE)
paisesLatinoamerica = c("Argentina", "Peru", "Chile", "Panama", "Brazil",
"Cuba", "Costa Rica", "Ecuador", "Colombia", "Guatemala",
"Mexico", "Uruguay", "Dominican Republic", "Paraguay", "Haiti",
"Honduras", "El Salvador", "Nicaragua", "Bolivia", "Venezuela")
contenidoApi = contenidoApi %>%
filter(name.common %in% paisesLatinoamerica)
contenidoApi = contenidoApi %>%
select(flag, name.common, name.official, capital,independent, continents,
unMember, region, subregion, latlng, landlocked, area, population)
str(contenidoApi)
contenidoApi %>%
distinct(name.common)
# Renombrando columnas
contenidoApi <- contenidoApi %>%
rename(
bandera = flag,
nombrePais = name.common,
nombrePaisOficial = name.official,
capitalPais = capital,
paisIndependiente = independent,
continente = continents,
ONU = unMember,
regionPais = region,
subregionPais = subregion,
coordenadas = latlng,
tieneMar = landlocked,
areaPais = area,
poblacion = population
)
contenidoApi = contenidoApi %>%
mutate(capitalPais = unlist(capitalPais),
continente = unlist(continente))
contenidoApi = contenidoApi %>%
mutate(coordenadas = sapply(coordenadas, paste, collapse = " "))
# Separar valores compuestos (TRANSFORMACION)
contenidoApi = contenidoApi %>%
separate(col = coordenadas,
c("latitud", "longitud"),
sep = " ")
# Convertir
contenidoApi = contenidoApi %>%
mutate(latitud = as.numeric(latitud),
longitud = as.numeric(longitud))
contenidoApi = contenidoApi %>%
mutate(nombrePais = case_when(
nombrePais == "Dominican Republic" ~ "Republica Dominicana",
nombrePais == "Brazil" ~ "Brasil",
TRUE ~ nombrePais
))
contenidoApi %>%
distinct(nombrePais)
urlWeb = "https://www.ondata.com.ec/ranking-de-salarios-minimos-en-america-latina-2025/"
# Leemos el contenido HTML de la página
pagina = read_html(urlWeb, encoding = "UTF-8")
# Extraemos los elementos h2
sueldos = pagina %>%
html_elements("h2.elementor-heading-title") %>%  # Seleccionamos los h2 deseados
html_text2()  # Extraemos el contenido
# Creamos un dataframe con el texto del h2
sueldos_Basicos = data.frame(sueldos)
# Separamos el texto del h2 en dos columnas: país y sueldo
sueldos_Basicos = sueldos_Basicos %>%
separate(col = sueldos,
c("pais", "sueldo"),
sep = " – ")
sueldos_Basicos = sueldos_Basicos %>%
mutate(
pais = iconv(pais, from = "UTF-8", to = "ASCII//TRANSLIT"),
pais = gsub("'","", pais))
sueldos_Basicos = sueldos_Basicos %>%
mutate(
sueldo = as.numeric(gsub("[\\$,]", "", sueldo))
)
sueldos_Basicos = sueldos_Basicos %>%
mutate(salarioMinimoPorHora_USD = round(sueldo / 160, 2)) %>%
rename(sueldoMinimo_USD = sueldo)
sueldos_Basicos = sueldos_Basicos %>%
filter(pais != "Belice")
sueldos_Basicos %>%
distinct(pais)
# Leer el archivo
datosExcel <- read_excel("/Users/oliversaraguro/Downloads/data_cts_violent_and_sexual_crime.xlsx", sheet = 1)
#Verificamos la estructura
str(datosExcel)
paisesLatinoamerica <- c(
"Argentina", "Bolivia", "Brasil", "Chile",
"Colombia", "Costa Rica", "Cuba", "Ecuador",
"El Salvador", "Guatemala", "Haiti", "Honduras",
"Mexico", "Nicaragua", "Panama",
"Paraguay", "Peru", "Republica Dominicana",
"Uruguay", "Venezuela"
)
# Renombramos las columnas
datosCrimenesLatinoamerica <- datosExcel %>%
select(
codigo_ISO = `Iso3_code`,
pais = `Country`,
region = `Region`,
subregion = `Subregion`,
indicador = `Indicator`,
dimension = `Dimension`,
categoria = `Category`,
anio = `Year`,
unidad = `Unit of measurement`,
valor = `VALUE`,
fuente = `Source`
) %>%
mutate(
anio = as.numeric(anio),
valor = as.numeric(valor)
)
#Filtramos la información de los últimos 10 años
#Filtramos por Region Americas
#Filtramos por Subregion Latin America and the Caribbean
datosCrimenesLatinoamerica <- datosCrimenesLatinoamerica %>%
filter(
anio %in% 2014:2023,
region == "Americas",
subregion == "Latin America and the Caribbean"
)
#Verificamos los paises que se extraen
datosCrimenesLatinoamerica %>%
distinct(pais) %>%
print(n = Inf)
#Corregimos el nombre del pais Bolivia (Plurinational State of) a Bolivia
#Corregimos el nombre del pais Dominican Republic a Republica Dominicana
#Corregimos el nombre del pais Brazil a Brasil
datosCrimenesLatinoamerica <- datosCrimenesLatinoamerica %>%
mutate(pais = case_when(
pais == "Bolivia (Plurinational State of)" ~ "Bolivia",
pais == "Dominican Republic" ~ "Republica Dominicana",
pais == "Venezuela (Bolivarian Republic of)" ~ "Venezuela",
pais == "Brazil" ~ "Brasil",
TRUE ~ pais
))
#Filtramos los paises del DataFrame datosCrimenesLatinoamerica en base al vector de paisesLatinoamerica
datosCrimenesLatinoamerica <- datosCrimenesLatinoamerica %>%
filter(pais %in% paisesLatinoamerica)
#Verificamos la estructura del DataFrame final
str(datosCrimenesLatinoamerica)
datosCrimenesLatinoamerica = datosCrimenesLatinoamerica %>%
mutate(valor = round(valor, 2))
datosCrimenesLatinoamerica %>%
distinct(pais)
dataSet = contenidoApi %>%
left_join(sueldos_Basicos, by = c(nombrePais = "pais"))
dataSet = dataSet %>%
left_join(datosCrimenesLatinoamerica, by = c(nombrePais = "pais"))
str(dataSet)
# LIMPIEZA
# ONU
dataSet = dataSet %>%
mutate(
ONU = as.character(ONU),
ONU = case_when(
ONU == "TRUE" ~ "Si",
ONU == "FALSE" ~ "No",
TRUE ~ ONU
)
)
# LIMPIEZA
# PAIS INDEPENDIENTE
dataSet = dataSet %>%
mutate(
paisIndependiente = as.character(paisIndependiente),
paisIndependiente = case_when(
paisIndependiente == "TRUE" ~ "Si",
paisIndependiente == "FALSE" ~ "No",
TRUE ~ paisIndependiente
)
)
# LIMPIEZA
# TIENE MAR
dataSet = dataSet %>%
mutate(
tieneMar = as.character(tieneMar),
tieneMar = case_when(
tieneMar == "TRUE" ~ "Si",
tieneMar == "FALSE" ~ "No",
TRUE ~ tieneMar
)
)
# TRANSFORMACION
# Decadas 2014 - 2023
dataSet = dataSet %>%
mutate(
decada = case_when(
anio >= 2010 & anio <= 2019 ~ 2010,
anio >= 2020 & anio <= 2029 ~ 2020,
TRUE ~ anio
)
)
# ENRIQUECIMIENTO
# Creacion de la variable densidadPlobacional = poblacion/areaPais
dataSet = dataSet %>%
mutate(densidadPoblacional = round(poblacion / areaPais, 2))
#
dataSet = dataSet %>%
select(bandera,
codigo_ISO,
nombrePais,
capitalPais,
continente,
regionPais,
subregionPais,
paisIndependiente,
tieneMar,
ONU,
latitud,
longitud,
areaPais,
poblacion,
sueldoMinimo_USD,
salarioMinimoPorHora_USD,
indicador,
dimension,
categoria,
anio,
decada,
unidad,
valorIndicador = valor)
getwd()
setwd("/Users/oliversaraguro/Desktop/CicloVI/analisisDeDatos/bimestre01/semana03")
df = read.csv("titanic.csv")
dim(df)
colnames(df)
head(df)
str(df)
summary(df)
class(df)
unique(df)
# Valores nulos
colSums(is.na(df))      # Cuantos valores nulos hay en la columna
colMeans(is.na(df))     # Media valores nulos hay en la columna
# Valores nulos y vacion
sapply(df, function(x) sum(is.na(x) | !nzchar(x))) # Cantidad de valores faltantes y nulos
sapply(df, function(x) sum(is.na(x) | !nzchar(x))) # Media de valores faltantes y nulos
# Inspeccionar observacones con valores faltantes
df[is.na(df$Embarked) | !nzchar(df$Embarked),]
sapply(df, function(x) mean(is.na(x) | !nzchar(x))) # Media de valores faltantes y nulos
library(dplyr)
# Eliminacion de filas
df1 = df %>% filter(!is.na(Emarked) & nzchar(Embarked))
library(dplyr)
# Eliminacion de filas
df1 = df %>% filter(!is.na(Emarked) & nzchar(Embarked))
# Eliminacion de filas
df1 = df %>% filter(!is.na(Embarked) & nzchar(Embarked))
# Eliminacion de columnas
df2 = df %>% select(-Cabin)
mediana_age = median(df$Age, na.rm = TRUE)
df3 = df %>% mutate(Age = ifelse(is.na(Age), mediana_age))
df3 = df %>% mutate(Age = ifelse(is.na(Age), mediana_age, Age))
df4 = df %>%
mutate(
Age = case_when(
is.na(Age) & Pclass == 1 mean(Age[Pclass == 1], na.rm = TRUE),
df4 = df %>%
mutate(Age = case_when(
is.na(Age) & Pclass == 1 mean(Age[Pclass == 1], na.rm = TRUE),
df4 = df %>%
mutate(Age = case_when(
is.na(Age) & Pclass == 1 ~ mean(Age[Pclass == 1], na.rm = TRUE),
is.na(Age) & Pclass == 2 ~ mean(Age[Pclass == 1], na.rm = TRUE),
is.na(Age) & Pclass == 3 ~ mean(Age[Pclass == 1], na.rm = TRUE),
TRUE ~ Age
)
)
df4
View(df4)
colnames(df)
colnames(df)
str(df)
unique(df$PassengerId)
unique(df$Survived)
mode(df$Survived)
unique(df$Pclass)
unique(df$Name)
unique(df$Sex)
str(df)
unique(df$Age)
unique(df$SibSp)
mode(df$SibSp)
unique(df$Parch)
unique(df$Fare)
unique(df$Cabin)
unique(df$Embarked)
# COnveritr a factores
df$Sex = as.factor(df$Sex)
df$Pclass = as.factor(df$Pclass)
str(df)
sapply(df, function(x) mode(x))
# o
df = df %>%
mutate(Sex = as.factor(Sex),
Pclass = as.factor(Pclass))
str(df)
mode(df$Sex)
# o
df = df %>%
mutate(Survived = as.factor(Survived),
Pclass = as.factor(Pclass),
Sex = as.factor(Sex),
Embarked = as.factor(Embarked),
)
str(df)
table(df$Pclass)
table(df$Sex)
prop.table(table(df$Pclass))
ggplot2(df, aes(x = Pclass)) +
geom_bar() +
labs(title = "Distribucion por clase de boleto",
x = "Clase de boleto",
y = "Frecuencia")
#
install.packages("ggplot2")
library(ggplot2)
ggplot2(df, aes(x = Pclass)) +
geom_bar() +
labs(title = "Distribucion por clase de boleto",
x = "Clase de boleto",
y = "Frecuencia")
ggplot(df, aes(x = Pclass)) +
geom_bar() +
labs(title = "Distribucion por clase de boleto",
x = "Clase de boleto",
y = "Frecuencia")
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x Sex, fill-Pclass)) +
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x Sex, fill-Pclass)) +
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x= Sex, fill = Pclass)) +
geom_bar() +
labs (title "Distribución de pasajeros por sexo y clase",
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x= Sex, fill = Pclass)) +
geom_bar() +
labs (title = "Distribución de pasajeros por sexo y clase",
x = "Sexo",
y = "Cantidad",
fill = "Clase") +
thene_wininal()
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x= Sex, fill = Pclass)) +
geom_bar() +
labs (title = "Distribución de pasajeros por sexo y clase",
x = "Sexo",
y = "Cantidad",
fill = "Clase") +
theme_wininal()
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x= Sex, fill = Pclass)) +
geom_bar() +
labs (title = "Distribución de pasajeros por sexo y clase",
x = "Sexo",
y = "Cantidad",
fill = "Clase") +
theme_mininal()
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x= Sex, fill = Pclass)) +
geom_bar() +
labs (
title = "Distribución de pasajeros por sexo y clase",
x = "Sexo",
y = "Cantidad",
fill = "Clase"
) +
theme_mininal()
mosaicplot(tabla_contingencia,
color = TRUE,
main = "Genero vs clases de bolet",
xlab = "Genero",
ylab = "Clase de boleto"
)
# Grafico de Mosaico
tabla_contingencia = table(df$Sex, df$Pclass)
mosaicplot(tabla_contingencia,
color = TRUE,
main = "Genero vs clases de bolet",
xlab = "Genero",
ylab = "Clase de boleto"
)
# GRAFICO DE BARRAS APILADAS
ggplot(df, aes (x= Sex, fill = Pclass)) +
geom_bar() +
labs (
title = "Distribución de pasajeros por sexo y clase",
x = "Sexo",
y = "Cantidad",
fill = "Clase"
) +
theme_minimal()
# MEDIDAS DE TENDENCIA CENTRAL Y DISPERSION
mean(df$Age, na.rm = TRUE)
median(df$Age, na.rm = TRUE)
sd(df$Age, na.rm = TRUE)
var(df$Age, na.rm = TRUE)
max(df$Age, na.rm = TRUE) - min(df$Age, na.rm = TRUE)
diff(df$Age, na.rm = TRUE)
summary(df$Age, na.rm = TRUE)

/*
DROP TABLE prestamos;
DROP TABLE ejemplares;
DROP TABLE autorias;
DROP TABLE libros;
DROP TABLE editoriales;
DROP TABLE usuarios;
DROP TABLE areas_conocimiento;
DROP TABLE autores;
*/



-- CREAR USUARIO Y OTORGAR PRIVILEGIOS
CREATE USER grupal_2 IDENTIFIED BY "123456789";
GRANT CONNECT TO grupal_2;
GRANT RESOURCE TO grupal_2 WITH ADMIN OPTION;
GRANT CREATE VIEW TO grupal_2;
CREATE OR REPLACE DIRECTORY imgPortadas AS 'C:\Users\Pablo\Desktop\imgPortadas';
GRANT READ, WRITE ON DIRECTORY imgPortadas TO grupal_2;
-- VERIFICAR CREACION DE DIRECTORIO
SELECT * FROM all_directories;



-- CREACION DE USUARIOS y sus permisos{ User1(Oliver),User2(Denis),User3(Augusto) }
CREATE USER oliver IDENTIFIED BY "123456";
CREATE USER denis IDENTIFIED BY "123456";
CREATE USER augusto IDENTIFIED BY "123456";
GRANT CONNECT TO oliver;
GRANT CONNECT TO denis;
GRANT CONNECT TO augusto;

/*
CONSULTA USUARIO 1 (OLIVER)
SELECT * FROM grupal_2.LIBROS_CON_AUTOR_PRINCIPAL;
CONSULTA USUARIO 2 (DENIS)
SELECT * FROM grupal_2.prestamos_ordenados_recientes;
CONSULTA USUARIO 3 (AUGUSTO)
UPDATE libros SET isbm = '46546843213245874153' WHERE idlibro = 25;
*/




-- OJOOOOOOO:   CREAR CONEXION CON grupal_2 y CORRER ESTE CODIGO:

-- Generated by Oracle SQL Developer Data Modeler 23.1.0.087.0806
--   at:        2024-05-30 21:47:24 ECT
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE areas_conocimiento (
    codarea      VARCHAR2(15) NOT NULL,
    nombrearea   VARCHAR2(250) NOT NULL,
    codareapadre VARCHAR2(15)
);

ALTER TABLE areas_conocimiento ADD CONSTRAINT areas_conocimiento_pk PRIMARY KEY ( codarea );

CREATE TABLE autores (
    idautor     INTEGER NOT NULL,
    nombreautor VARCHAR2(100) NOT NULL,
    pais        CHAR(2) NOT NULL,
    foto        BLOB,
    bio         VARCHAR2(2500),
    numlibros   INTEGER DEFAULT 0 NOT NULL
);

ALTER TABLE autores ADD CONSTRAINT autores_pk PRIMARY KEY ( idautor );
-- AUTORES NUMLIBROS NO PUEDER SER NEGATIVO.
ALTER TABLE autores ADD CONSTRAINT numlibros_ck CHECK (numlibros >= 0);

CREATE TABLE autorias (
    idlibro INTEGER NOT NULL,
    idautor INTEGER NOT NULL,
    orden   SMALLINT NOT NULL
);

ALTER TABLE autorias ADD CONSTRAINT autorias_pk PRIMARY KEY ( idlibro,
                                                              idautor );

-- En la tabla autorias, un mismo libro no puede tener dos o más autores con el mismo orden. 
ALTER TABLE autorias ADD CONSTRAINT orden_unico UNIQUE (idlibro, orden);


CREATE TABLE editoriales (
    idedit     INTEGER NOT NULL,
    nombreedit VARCHAR2(100) NOT NULL,
    pais       VARCHAR2(100) NOT NULL,
    web        VARCHAR2(200)
);

ALTER TABLE editoriales ADD CONSTRAINT editoriales_pk PRIMARY KEY ( idedit );

CREATE TABLE ejemplares (
    idejemplar INTEGER NOT NULL,
    idlibro    INTEGER NOT NULL,
    ubicacion  VARCHAR2(40),
    status     CHAR(1) NOT NULL
);

ALTER TABLE ejemplares ADD CONSTRAINT ejemplares_pk PRIMARY KEY ( idejemplar );
-- EJEMPLARES ESTATUS TRES POSIBLES VALORES "D" DISPONIBLE, "P" PRESTADO, "B" DADO DE BAJA
ALTER TABLE ejemplares ADD CONSTRAINT status_ck CHECK (status in('D', 'P', 'B'));


CREATE TABLE libros (
    idlibro    INTEGER NOT NULL,
    isbm       VARCHAR2(20) NOT NULL,
    titulo     VARCHAR2(500) NOT NULL,
    sinopsis   VARCHAR2(2500),
    numpaginas INTEGER NOT NULL,
    idioma     CHAR(2),
    codarea    VARCHAR2(15) NOT NULL,
    anio       NUMBER(4) NOT NULL,
    nroedicion NUMBER(4) NOT NULL,
    idedit     INTEGER NOT NULL,
    imgpotada  BLOB DEFAULT EMPTY_BLOB()
);

ALTER TABLE libros ADD CONSTRAINT libros_pk PRIMARY KEY (idlibro);

ALTER TABLE libros ADD CONSTRAINT "libros __UN" UNIQUE (isbm);

-- libros numpagina Debe ser mayor a 50 y menor a 2000.
ALTER TABLE libros ADD CONSTRAINT numPagina_ck CHECK (numpaginas > 50 AND numpaginas < 2000);
-- libros nroedicion Debe ser mayor a 0.
ALTER TABLE libros ADD CONSTRAINT nroedicion_ck CHECK (nroedicion > 0);

-- libros anio Debe ser mayor a 1800.
ALTER TABLE libros ADD CONSTRAINT anio_ck CHECK (anio > 1800);


CREATE TABLE prestamos (
    idprestamo       INTEGER NOT NULL,
    idejemplar       INTEGER NOT NULL,
    cedula           VARCHAR2(15) NOT NULL,
    fechaprestamo    DATE NOT NULL,
    fechavencimiento DATE NOT NULL,
    fechadevolucion  DATE,
    observacion      VARCHAR2(2000)
);

ALTER TABLE prestamos ADD CONSTRAINT prestamos_pk PRIMARY KEY ( idprestamo );

-- prestamos fechaDevolucion No debe ser inferior a la fecha de prestamo.
ALTER TABLE prestamos ADD CONSTRAINT fechadevolucion_ck CHECK (fechadevolucion > fechaprestamo);


CREATE TABLE usuarios (
    cedula    VARCHAR2(15) NOT NULL,
    apellidos VARCHAR2(50) NOT NULL,
    nombres   VARCHAR2(50) NOT NULL,
    direccion VARCHAR2(250),
    telefono1 VARCHAR2(20),
    telefono2 VARCHAR2(20),
    telefono3 VARCHAR2(20),
    email     VARCHAR2(60)
);

ALTER TABLE usuarios ADD CONSTRAINT usuarios_pk PRIMARY KEY ( cedula );

ALTER TABLE usuarios ADD CONSTRAINT usuarios__un UNIQUE ( email );

-- usuarios email Debe nescesariamente incluir el caracter especial "@" y debe
-- incluir al menos dos caracteres antes y despues del arroba.
ALTER TABLE usuarios ADD CONSTRAINT email_ck CHECK (REGEXP_LIKE(email, '@'));


ALTER TABLE areas_conocimiento
    ADD CONSTRAINT areas_conocimiento FOREIGN KEY ( codareapadre )
        REFERENCES areas_conocimiento ( codarea );

ALTER TABLE autorias
    ADD CONSTRAINT autorias_autores_fk FOREIGN KEY ( idautor )
        REFERENCES autores ( idautor );

ALTER TABLE autorias
    ADD CONSTRAINT "autorias_libros _FK" FOREIGN KEY ( idlibro )
        REFERENCES libros ( idlibro );

ALTER TABLE ejemplares
    ADD CONSTRAINT "ejemplares_libros _FK" FOREIGN KEY ( idlibro )
        REFERENCES libros ( idlibro );

ALTER TABLE libros
    ADD CONSTRAINT "libros _areas_conocimiento_FK" FOREIGN KEY ( codarea )
        REFERENCES areas_conocimiento ( codarea );

ALTER TABLE libros
    ADD CONSTRAINT "libros _editoriales_FK" FOREIGN KEY ( idedit )
        REFERENCES editoriales ( idedit );

ALTER TABLE prestamos
    ADD CONSTRAINT prestamos_ejemplares_fk FOREIGN KEY ( idejemplar )
        REFERENCES ejemplares ( idejemplar );

ALTER TABLE prestamos
    ADD CONSTRAINT prestamos_usuarios_fk FOREIGN KEY ( cedula )
        REFERENCES usuarios ( cedula );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             8
-- CREATE INDEX                             0
-- ALTER TABLE                             18
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0



-- INSERTAR DATOS
-- EDITORIALES

BEGIN
    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (1, 'HarperCollins', 'Reino Unido', 'https://www.harpercollinsiberica.com/# ');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (2, 'El Conejo', 'Ecuador', 'https://editorialelconejo.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (3, 'Vintage Español', 'España', 'https://www.penguinlibros.com/us/181039-vintage-espanol');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (4, 'DEBOLSILLO', 'Argentina', 'https://www.penguinlibros.com/es/11338-debolsillo');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (5, 'Scholastic', 'Estados Unidos', 'www.scholastic.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (6, 'Bantam Books', 'Estados Unidos', 'https://www.randomhousebooks.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (7, 'Alfred A. Knopf', 'Estados Unidos', 'https://knopfdoubleday.com/imprint/knopf/');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (8, 'Harper Perennial Modern Classics', 'Estados Unidos', 'www.harpercollins.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (9, 'Penguin', 'Reino Unido', 'https://www.penguinlibros.com/es/');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (10, 'Signet Classics', 'Reino Unido', 'https://es.babelio.com/editeur/8893/Signet-Classics');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (11, 'Mariner Books Classics', 'Estados Unidos', 'www.marinerbooks.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (12, 'Scribner', 'Estados Unidos', 'www.simonandschuster.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (13, 'Little, Brown and Company', 'Estados Unidos', 'www.littlebrown.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (14, 'Simon Y Schuster', 'Estados Unidos', 'www.simonandschuster.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (15, 'Riverhead Books', 'Estados Unidos', 'www.riverheadbooks.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (16, 'HarperOne', 'California', 'https://www.harpercollins.com/collections/harperone');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (17, 'Pantheon', 'Nueva York', 'https://knopfdoubleday.com/imprint/pantheon/');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (18, 'Harper Perennial', 'Estados Unidos', 'www.harpercollins.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (19, 'Vintage', 'Nueva York', 'https://knopfdoubleday.com/imprint/vintage/');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (20, 'Picador', 'Estados Unidos', 'https://www.panmacmillan.com/picador');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (21, 'Knopf Books for Young Readers', 'Canada', 'www.penguinrandomhouseretail.com');

    INSERT INTO editoriales (idedit, nombreedit, pais, web) 
    VALUES (22, 'Alfaguara Infantil', 'Mexico', 'https://www.elsotano.com/editorial/alfaguara-juvenil/6503/');
    
    COMMIT;
    
    EXCEPTION WHEN OTHERS THEN
        ROLLBACK;
    RAISE;    
END;
/

-- AREA_CONOCIMIENTO

BEGIN
    -- Insertar las áreas de conocimiento con siglas diferenciales
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('LIT', 'Literatura', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('LTF', 'Literatura fantástica', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('LTC', 'Literatura contemporánea', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('LCL', 'Literatura clásica', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('LJU', 'Literatura juvenil', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('RMG', 'Realismo mágico', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('FCE', 'Ficción épica', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('FXE', 'Ficción experimental', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('POE', 'Poesía', 'LIT');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('CDF', 'Ciencia ficción y Distopía', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('CIF', 'Ciencia ficción', 'CDF');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('DIS', 'Distopía', 'CDF');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('POS', 'Postapocalíptica', 'CDF');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('FTE', 'Ficción de Terror', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('TER', 'Terror', 'FTE');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('LGO', 'Literatura gótica', 'FTE');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('HCS', 'Historia y Crítica Social', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('CRT', 'Crítica social', 'HCS');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('HUS', 'Historia estadounidense', 'HCS');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('DCI', 'Derechos civiles', 'HCS');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('HAF', 'Historia afgana', 'HCS');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('SGM', 'Segunda Guerra Mundial', 'HCS');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('EAY', 'Espiritualidad y Autoayuda', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('ESP', 'Espiritualidad', 'EAY');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('AUT', 'Autoayuda', 'EAY');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('VIG', 'Viajes y Geografía', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('VIA', 'Viajes', 'VIG');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('GEO', 'Geografía', 'VIG');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('PSA', 'Psicología y Adolescencia', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('PSI', 'Psicología', 'PSA');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('ADO', 'Adolescencia', 'PSA');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('IDG', 'Identidad y Género', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('IDN', 'Identidad de género', 'IDG');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('FEM', 'Feminismo', 'IDG');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('MYA', 'Misterio y Aventura', NULL);
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('MIS', 'Misterio', 'MYA');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('AVE', 'Aventura', 'MYA');
    INSERT INTO areas_conocimiento (codarea, nombrearea, codareapadre) VALUES ('MIT', 'Mitología', NULL);
    COMMIT;
    
    EXCEPTION WHEN OTHERS THEN
        ROLLBACK;
    RAISE;    
END;
/

--Libro 1

DECLARE
    V_TEMP BLOB;
    V_BFILE BFILE;
    V_NOMBRE_FOTO VARCHAR(10);
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (1, '9780007149216', 'The Lord of the Rings: The Fellowship of the Ring', 'En la apacible Comarca, hogar de los apacibles hobbits. Bilbo Bolsón celebra su 111 cumpleaños y decide partir hacia Rivendel, dejando a su sobrino Frodo con un antiguo y poderoso Anillo Único forjado por el Señor Oscuro Sauron. Frodo pronto descubre el verdadero poder del Anillo y su capacidad para corromper las mentes de los seres vivos. El mago Gandalf revela que Sauron ha regresado y busca recuperar el Anillo para sumir a la Tierra Media en la oscuridad. La única forma de detenerlo es destruir el Anillo arrojándolo a las llamas del Monte del Destino en Mordor. Frodo acepta la misión y parte de la Comarca con sus leales amigos Sam, Merry y Pippin. En la ciudad élfica de Rivendel, la recién formada Compañía del Anillo se une por: Gandalf, el montaraz Aragorn (heredero del reino de Gondor), el elfo Legolas, el enano Gimli y el mago Saruman (corrompido en secreto). Durante su viaje, la Compañía debe atravesar las peligrosas Montañas Nubladas, donde son atacados por los espectros Nazgûl al servicio de Sauron. Obligados a tomar un desvío a través de las minas de Moria, se enfrentan a un antiguo y poderoso mal: un Balrog de Morgoth. Gandalf sacrifica su vida para permitir que el resto escape. Con la Compañía disuelta tras la pérdida de Gandalf, Aragorn, Legolas y Gimli parten en busca de los hobbits secuestrados por los Uruk-hai. Frodo y Sam continúan solos hacia Mordor, guiados por la misteriosa criatura Gollum, una vez poseedor del Anillo y consumido por su influencia corruptora. Termina con Frodo y Sam acercándose a los escalones de Cirith Ungol que conducen a Mordor, mientras estalla la guerra contra Sauron en todo el oeste.'
        , 535, 'EN', 'LTF', 1970, 1, 1, EMPTY_BLOB()) RETURNING imgpotada INTO V_TEMP;
        
    V_NOMBRE_FOTO := 'img1.jpeg';
    
    -- Verificar acceso a la imagen en una línea
    BEGIN
        V_BFILE := BFILENAME('IMGPORTADAS', V_NOMBRE_FOTO);
        DBMS_LOB.FILEOPEN(V_BFILE);
        DBMS_LOB.FILECLOSE(V_BFILE);
    END;
    
    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 1, 'John Ronald Reuel Tolkien', 'UK', 'John Ronald Reuel Tolkien (1892-1973) fue un prolífico escritor, poeta, filólogo y profesor universitario británico, nacido en Sudáfrica. Su profundo interés por la mitología, los idiomas y las culturas antiguas influenció grandemente su obra literaria. Tolkien estudió en la Universidad de Oxford, donde posteriormente se convirtió en profesor de anglosajón.
    Durante su carrera académica, Tolkien se destacó por su investigación en filología y su participación en la creación del Oxford English Dictionary. Sin embargo, su verdadera pasión residía en la creación de mundos fantásticos y mitologías propias.
    Tolkien es conocido principalmente como el creador de la Tierra Media, un mundo ficticio donde se desarrollan sus obras más famosas: "El Hobbit", "El Señor de los Anillos" y "El Silmarillion". Estas obras, ambientadas en un mundo de fantasía poblado por razas diversas como hobbits, elfos, enanos y humanos, han dejado un legado perdurable en la literatura y la cultura popular.
    Su obra más célebre, "El Señor de los Anillos", es considerada un hito en la literatura fantástica, y ha sido adaptada con gran éxito al cine y otros medios de entretenimiento. Tolkien también fue un pionero en la creación de lenguajes ficticios completos, como el élfico y el sindarin, que añadieron profundidad y autenticidad a sus mundos imaginarios.
    Además de su labor como escritor, Tolkien fue un devoto católico y un hombre de familia, casado con Edith Tolkien, con quien tuvo cuatro hijos. Su legado literario y su influencia en la cultura popular perduran hasta el día de hoy, consolidándolo como uno de los escritores más importantes del siglo XX y un referente indiscutible en el género de la fantasía.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (1, 1, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (1, 1, 'ESTANTERIA A', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (2, 1, 'ESTANTERIA A', 'B');

    COMMIT;
    EXCEPTION WHEN OTHERS THEN
        ROLLBACK;
        RAISE;
END;
/


-- lIBRO 2
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (2, '9789978876275', 'El peso interior', 'El horror dentro de la vida cotidiana y en situaciones que luego cobran un tinte fantástico y macabro marcan el estilo de Jorge Luis Cáceres. Un estilo contundente, fluido, rápido, que envuelve en la historia al lector. Este libro contiene ocho cuentos tan o más potentes que los de su libro predecesor y ganador del premio nacional de cuento Joaquín Gallegos Lara. El peso interior es una obra concisa que aborda los miedos profundos, los temores, las cargas y pesares que se lleva adentro y atormentan como una pesada sombra.', 
    200, 'ES', 'POE', 2023, 1, 2, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img2.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
        INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 2, 'Jorge Luis Cáceres', 'EC', 'Jorge Luis Cáceres (Quito, Ecuador, 1982). Ha escrito los 
    libros de cuentos Desde las sombras (Quito, 2007), La flor del frío (Quito, 2009) y Aquellos extraños días 
    en los que brillo (Lima, 2011); y Las moscas y otros cuentos (Editorial El Conejo, Quito, 2017), con el cual 
    obtuvo el premio nacional de literatura Joaquín Gallegos Lara, y la novela Los diarios ficticios de Martín Gómez 
    (Sudaquia Editores, New York, 2017). Como antologador preparó el dossier de narradores ecuatorianos para la 
    UNAM de México bajo el título de Lo que haremos cuando la ficción se agote (México, 2011), No entren al 1408, 
    antología en español tributo a Stephen King, que cuenta con siete ediciones (Quito, 2013, 2016; México D.F., 2014; 
    Buenos Aires, 2016; Santiago, 2017; Madrid, 2017 y Lima, 2018). Cuentos suyos aparecen en las antologías El Desafío 
    de lo imaginario (Lima, 2011), Letras cómplices (Quito, 2011), GPS antología de cuentistas ecuatorianos (Santa Clara, 2014), 
    Ecuador Cuenta (Madrid, 2014. Selección de Julio Ortega), Despertar de la Hydra (Quito, 2017) y en revistas internacionales 
    como Barcelona Review, Punto en Línea, Big-Sur, Letralia, entre otras. Elegido por la Feria Internacional del Libro de 
    Guadalajara 2012, como uno de los 35 autores destacados por “Latinoamérica Viva”.

');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (2, 2, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (3, 2, 'ESTANTERIA B', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (4, 2, 'ESTANTERIA B', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


-- LIBRO 3
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (3, 'B0CVTL2L21', 'Macabro', 'Las historias aquí contadas pertenecen al universo inagotable y enigmático de la muerte. Aquí se juntan hombres y mujeres de distintas épocas y geografía: un mítico cantor que atraviesa las islas griegas para olvidar la tragedia de su esposa, un parisino obsesionado por el perfume de una orquídea que yace en el corazón de la selva ecuatoriana, dos pianistas virtuosas que se baten en medio de las fuerzas descomunales del amor y el odio... En la intimidad de cada historia será la muerte una fuerza generadora, a veces hacia la búsqueda del sentido de la existencia, a veces hacia el caudal desbordado de las pasiones.', 
    108, 'ES', 'TER', 2024, 1, 2, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img3.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 3, 'Gabriel Espinoza', 'EC', 'músico, escritor y psicólogo 
    clínico. Realizó sus estudios en el Conservatorio Particular de Música "Jorge Manzano Escalante" 
    y en la Facultad de Ciencias Psicológicas de la Universidad de Guayaquil. Ha escrito y estrenado obras 
    de teatro, principalmente con su agrupación Jocularis Teatro Musical. Fue creador y director artístico
     de la orquesta de cámara de la provincia de Santa Elena. Sus géneros de trabajo incluyen dramaturgia, 
     poesía, narrativa y composición orquestal. Actualmente reside en Guayaquil.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (3, 3, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (5, 3, 'ESTANTERIA C', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (6, 3, 'ESTANTERIA C', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

 -- LIBRO 4
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (4, '9788497592208', 'Cien años de soledad', 'Cien años de soledad, es una obra maestra del realismo mágico escrita por Gabriel García Márquez. La novela nos sumerge en el mundo mágico y enigmático de la familia Buendía en el pueblo ficticio de Macondo. A través de generaciones, la historia sigue a los Buendía mientras enfrentan guerras, amores, traiciones y eventos sobrenaturales. Con una prosa rica y evocadora, García Márquez explora temas universales como el tiempo, la soledad y el destino.
    Con la fusión de lo real y lo fantástico, esta obra monumental ha dejado una huella indeleble en la literatura mundial y es considerada una de las grandes obras del siglo XX. A través de su narración mágica y su estilo inigualable, García Márquez nos invita a reflexionar sobre la condición humana y el curso inevitable de la historia.', 
    496, 'ES', 'RMG', 2003, 1, 4, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img4.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 4, 'Gabriel García Márquez', 'CO', 'Gabriel García Márquez(1927-2014) fue un escritor, novelista y 
    periodista colombiano, ganador del Premio Nobel de Literatura en 1982. 
    Es conocido por sus obras de realismo mágico, y es una de las figuras 
    más destacadas de la literatura latinoamericana.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (4, 4, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (7, 4, 'ESTANTERIA D', 'B');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (8, 4, 'ESTANTERIA D', 'D');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

 -- LIBRO 5
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (5, '9788408105823', 'La sombra del viento', 'La sombra del viento, escrita por Carlos Ruiz Zafón, es una fascinante novela que combina misterio, romance e historia en una trama absorbente. Ambientada en la Barcelona de la posguerra, la historia sigue a Daniel Sempere, un joven que descubre un libro maldito en el Cementerio de los Libros.
    olvidados. Fascinado por la obra, Daniel se embarca en una búsqueda para descubrir los secretos del autor, Julián Carax, y desentrañar el misterio que rodea su vida y su obra. Con personajes memorables y una narrativa envolvente, Ruiz Zafón nos transporta a un mundo de intrigas y pasiones ocultas, donde el poder de los libros y la literatura 
    juega un papel crucial. A través de una prosa poética y una atmósfera evocadora, La sombra del viento se ha convertido en una de las novelas más queridas de la literatura contemporánea.', 
    569, 'ES', 'MYA', 2003, 1, 4, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img5.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 5, 'Carlos Ruiz Zafón', 'ES', 'Carlos Ruiz Zafón (1964-2020) fue un novelista 
    español conocido por sus novelas de misterio y aventura, que han cautivado a millones 
    de lectores en todo el mundo. Su obra más famosa, "La sombra del viento," es parte de 
    la serie "El Cementerio de los Libros Olvidados.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (5, 5, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (9, 5, 'ESTANTERIA E', 'B');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (10, 5, 'ESTANTERIA E', 'D');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--Libro 6
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (6, '9780525562887', 'El Laberinto de los Espíritus', 'El Laberinto de los Espíritus, es la cuarta y última entrega de la saga 
    "El Cementerio de los Libros Olvidados" escrita por Carlos Ruiz Zafón. En esta épica conclusión, nos sumergimos una vez más 
    en el fascinante y misterioso mundo de la posguerra española, donde se entrelazan pasiones, secretos y destinos enterrados 
    en el corazón de Barcelona. La historia sigue a Alicia Gris, una investigadora privada con un oscuro pasado, quien es contratada 
    para resolver el enigma de la desaparición de un ministro del gobierno franquista. A medida que Alicia se adentra en la 
    investigación, descubre un mundo de corrupción, traición y venganza que la llevará a enfrentarse a sus propios demonios internos. 
    Paralelamente, Daniel Sempere, el joven protagonista de las entregas anteriores, se embarca en su propia búsqueda para descubrir 
    la verdad detrás de la misteriosa muerte de su madre. En su camino, se encontrará con antiguos enemigos y aliados inesperados,
    mientras se adentra en el oscuro laberinto de los secretos familiares y los lazos que unen su destino al de otros personajes de la 
    saga. A través de una narrativa rica en suspense, intriga y emociones, "El Laberinto de los Espíritus" teje una compleja red de 
    personajes y tramas que se entrelazan en un emocionante clímax final. Con giros inesperados y revelaciones impactantes, Carlos Ruiz 
    Zafón nos lleva en un viaje inolvidable a través de los callejones y pasadizos de Barcelona, donde los secretos del pasado y del 
    presente se entrelazan en un laberinto de misterio y redención.', 
    928, 'ES', 'MYA', 2003, 1, 3, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img6.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 6, 'Carlos Ruiz Zafón', 'ES', 'Carlos Ruiz Zafón (1964-2020) fue 
    un novelista español conocido por su serie de libros "El Cementerio de los 
    Libros Olvidados". Sus obras se caracterizan por una mezcla de suspense, 
    intriga y una rica ambientación histórica.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (6, 6, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (11, 6, 'ESTANTERIA F', 'B');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (12, 6, 'ESTANTERIA F', 'P');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--Libro 7
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (7, '9788466337113', 'Los detectives salvajes', 'Los detectives salvajes, escrita por Roberto Bolaño, es una 
    novela épica que sigue las aventuras de un grupo de jóvenes poetas en busca de un enigmático escritor desaparecido. 
    La historia se desarrolla en la década de 1970 en la Ciudad de México y abarca más de veinte años, llevando al lector 
    por un viaje lleno de intriga, pasión y rebelión contra el status quo literario y social. La narrativa comienza con 
    la presentación de Arturo Belano y Ulises Lima, dos poetas jóvenes que forman parte del movimiento literario 
    infrarrealista. Juntos, emprenden la búsqueda del legendario escritor Cesárea Tinajero, cuyos poemas revolucionarios 
    han dejado una marca indeleble en el mundo literario mexicano. A medida que avanzan en su búsqueda, se encuentran con 
    una serie de personajes excéntricos y marginales que los llevarán a través de México, Estados Unidos y Europa, en una 
    odisea llena de encuentros fortuitos y desafíos inesperados. A lo largo del camino, se ven envueltos en conspiraciones 
    políticas, romances apasionados y experiencias límites que ponen a prueba su amistad y su lealtad. La novela está 
    compuesta por una serie de testimonios de personas que conocieron a Belano y Lima en diferentes etapas de sus vidas, 
    lo que añade una capa adicional de misterio y complejidad a la trama. A medida que se desentraña el enigma de la 
    desaparición de Tinajero, se revelan los secretos más oscuros y profundos de los personajes principales, así como el 
    impacto de sus acciones en el mundo que los rodea. "Los detectives salvajes" es una obra maestra de la literatura contemporánea 
    que combina elementos de la novela de aventuras, el relato detectivesco y el testimonio personal para crear una narrativa 
    absorbente y multifacética que desafía las convenciones literarias y sociales de su tiempo. Es una exploración profunda de 
    la búsqueda de la identidad, la creatividad y el significado en un mundo caótico y en constante cambio.', 
    760, 'ES', 'POE', 2017, 1, 4, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img7.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 7, 'Carlos Ruiz Zafón', 'ES', 'Carlos Ruiz Zafón (1964-2020) fue 
    un novelista español conocido por su serie de libros "El Cementerio de los 
    Libros Olvidados". Sus obras se caracterizan por una mezcla de suspense, 
    intriga y una rica ambientación histórica.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (7, 7, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (13, 7, 'ESTANTERIA G', 'P');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (14, 7, 'ESTANTERIA G', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


--Libro 8
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (8, '9780439554930', 'Harry Potter and the Sorcerers Stone', 'Harry Potter, un niño huérfano criado por sus 
    desagradables tíos, descubre en su undécimo cumpleaños que es un mago. Es invitado a asistir a la Escuela de Magia y 
    Hechicería de Hogwarts, donde se entera de sus padres y de su conexión con el malvado mago Voldemort. Harry forma 
    amistades con Ron Weasley y Hermione Granger, y juntos descubren el misterio de la Piedra Filosofal, que otorga la 
    inmortalidad y está siendo buscada por Voldemort.', 
    309, 'EN', 'MYA', 1997, 1, 5, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img8.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 8, 'J.K. Rowling', 'US', 'J.K. Rowling (1965) es una autora
     británica, conocida por su serie de libros "Harry Potter", que se ha 
     convertido en una de las franquicias literarias y cinematográficas más 
     exitosas de la historia.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (8, 8, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (15, 8, 'ESTANTERIA H', 'B');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (16, 8, 'ESTANTERIA H', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


--Libro 9
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (9, '9780553386790', 'A Game of Thrones', 'En el continente de Poniente, las familias nobles luchan por el Trono de Hierro. La familia 
    Stark, liderada por Eddard "Ned" Stark, se ve envuelta en una trama de intrigas y traiciones. Mientras tanto, al otro 
    lado del mar Angosto, Daenerys Targaryen intenta reclamar el trono de su padre. La historia se enreda en una lucha por el
     poder, la traición y la supervivencia, con la amenaza de los caminantes blancos al norte del muro.', 
    694, 'EN', 'MYA', 1996, 1, 6, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img9.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 9, 'George R.R. Martin ', 'US', 'George R.R. Martin (1948)
     es un escritor estadounidense de literatura fantástica, 
     conocido principalmente por su serie de novelas "Canción 
     de Hielo y Fuego", que ha sido adaptada a la popular serie 
     de televisión "Game of Thrones".');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (9, 9, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (17, 9, 'ESTANTERIA I', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (18, 9, 'ESTANTERIA I', 'P');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


-- LIBRO 10
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (10, '9780307265432', 'The Road', 'En un mundo post-apocalíptico, un padre y su hijo intentan sobrevivir mientras
     se dirigen hacia el sur en busca de un clima más cálido. El paisaje está devastado y apenas hay comida o refugio. A lo 
     largo de su viaje, enfrentan peligros de otros sobrevivientes desesperados y la desesperanza constante. La novela trata
    sobre el amor, la esperanza y la lucha por la supervivencia en circunstancias extremas.', 
    287, 'EN', 'MYA', 2006, 1, 7, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img10.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 10, 'Cormac McCarthy', 'US', 'Cormac McCarthy (1933-2023) 
    fue un novelista estadounidense conocido por su estilo sombrío y su 
    exploración de temas de violencia, supervivencia y moralidad. Su obra 
    incluye libros aclamados como "The Road" y "No Country for Old Men".');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (10, 10, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (19, 10, 'ESTANTERIA J', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (20, 10, 'ESTANTERIA J', 'P');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


-- LIBRO 11
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (11, '9780061120084', 'To Kill a Mockingbird', 'En la década de 1930 en el sur de Estados Unidos, la joven Scout 
    Finch vive con su hermano Jem y su padre Atticus, un abogado que defiende a un hombre negro acusado falsamente de violar
    a una mujer blanca. A través de los ojos de Scout, la novela explora temas de racismo, injusticia y moralidad en una 
    comunidad profundamente dividida.', 
    324, 'EN', 'HCS', 1960, 1, 8, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img11.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 11, 'Harper Lee', 'US', 'Harper Lee (1926-2016) fue una novelista 
    estadounidense conocida por su obra "To Kill a Mockingbird", que ganó el Premio 
    Pulitzer y se ha convertido en un clásico de la literatura moderna.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (11, 11, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (21, 11, 'ESTANTERIA K', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (22, 11, 'ESTANTERIA K', 'P');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--LIBRO 12
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (12, '9780141439518', 'Pride and Prejudice', ' Elizabeth Bennet es una joven vivaz e inteligente que vive con
     su familia en una sociedad inglesa de principios del siglo XIX. Cuando el rico y apuesto Sr. Darcy llega a su vida, 
     Elizabeth se enfrenta a sus propios prejuicios y malentendidos sobre el carácter y las intenciones de Darcy. La novela 
     aborda temas de matrimonio, clase social y moralidad con ingenio y sensibilidad.', 
    279, 'EN', 'LJU', 1813, 1, 9, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img12.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 12, 'Jane Austen', 'UK', 'Jane Austen (1775-1817) 
    fue una novelista inglesa conocida por sus obras que analizan, 
    critican y comentan la sociedad de su época. "Pride and Prejudice" 
    es una de sus novelas más conocidas y queridas.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (12, 12, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (23, 12, 'ESTANTERIA M', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (24, 12, 'ESTANTERIA M', 'D');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

-- LIBRO 13
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (13, '9780451524935', '1984', ' En una distopía totalitaria gobernada por el Partido y su líder, el Gran Hermano, 
    Winston Smith trabaja alterando registros históricos para ajustarse a la propaganda del Partido. A medida que Winston 
    comienza a cuestionar la opresiva realidad en la que vive, se involucra en una peligrosa relación amorosa y se convierte 
    en objetivo del control estatal. La novela explora temas de vigilancia, control mental y la manipulación de la verdad.', 
    328, 'EN', 'PSA', 1949, 1, 10, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img13.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 13, 'George Orwell', 'UK', 'George Orwell (1903-1950) fue un escritor 
    y periodista británico conocido por sus novelas distópicas "1984" y "Animal 
    Farm", que critican el totalitarismo y exploran temas de política, verdad y libertad.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (13, 13, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (25, 13, 'ESTANTERIA N', 'P');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (26, 13, 'ESTANTERIA N', 'D');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


-- LIBRO 14
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (14, '9780156027328', 'Life of Pi', 'Piscine Molitor Patel, conocido como Pi, sobrevive a un naufragio en un bote 
    0salvavidas junto a un tigre de Bengala llamado Richard Parker. La historia sigue su lucha por sobrevivir en el océano Pacífico,
     donde enfrenta la soledad, el hambre y la constante amenaza del tigre. La novela es una reflexión sobre la fe, la supervivencia 
     y la naturaleza de la realidad.', 
    319, 'EN', 'PSA', 2001, 1, 11, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img14.jpeg'); -- Obtener la referencia al archivo BFILE

    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
        
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB

    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 14, 'Yann Martel', 'CA', 'Yann Martel (1963) es un reconocido escritor canadiense de origen español,
     mejor conocido por su aclamada novela "Life of Pi" (Vida de Pi) de 2001, que ganó el prestigioso Premio Man 
     Booker y fue adaptada al cine en 2012. Nacido en Salamanca, España, de padres canadienses, Martel creció en 
     diferentes partes del mundo debido al trabajo diplomático de su padre. Pasó gran parte de su infancia y 
     juventud en lugares como Costa Rica, Francia, México y la India, experiencias que influenciaron profundamente su escritura.
    Antes de su exitosa novela, Martel publicó las colecciones de relatos "The Facts Behind the Helsinki Vampires" y 
    "Self", además de la novela "Self" en 1996. Sin embargo, fue con "Vida de Pi" que logró el reconocimiento mundial.
    Esta extraordinaria historia, que combina realismo mágico y elementos de aventura, sigue a un adolescente indio 
    que sobrevive a un naufragio y debe navegar por el Océano Pacífico en una balsa junto a un tigre de Bengala. 
    La novela explora temas profundos como la fe, la supervivencia y el poder de la narración.
    Además de conquistar al público, "Vida de Pi" cautivó a la crítica y recibió numerosos premios. La exitosa 
    adaptación cinematográfica de 2012, dirigida por Ang Lee, consolidó a Martel como un novelista de talla internacional.
    Desde entonces, ha publicado otros trabajos como el libro de relatos "The High Mountains of Portugal" en 
    2016. Martel se ha convertido en uno de los autores canadienses contemporáneos más conocidos y respetados a nivel mundial.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (14, 14, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (27, 14, 'ESTANTERIA O', 'P');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (28, 14, 'ESTANTERIA O', 'D');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


-- LIBRO 15
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (15, '9780743273565', 'The Great Gatsby', 'En los locos años veinte en Nueva York, el misterioso millonario Jay Gatsby organiza fiestas lujosas con la esperanza de reencontrarse con su amor perdido, Daisy Buchanan. Narrado por Nick Carraway, primo de Daisy y vecino de Gatsby, la novela explora temas de amor, riqueza, y el sueño americano, culminando en una trágica revelación sobre la verdadera naturaleza de Gatsby.'
        , 180, 'EN', 'LCL', 1925, 1, 12, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img15.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 15, 'F. Scott Fitzgerald', 'US', 'F. Scott Fitzgerald (1896-1940) fue un célebre novelista y cuentista estadounidense, considerado uno de los más grandes escritores del siglo XX. Es reconocido por capturar magistralmente el espíritu de la era del jazz y la decadencia de la alta sociedad estadounidense de los años 20.
        Su novela más famosa y aclamada es "The Great Gatsby" (El gran Gatsby) de 1925, una obra maestra sobre la desintegración del sueño americano. Con su prosa lírica y personajes inolvidables, ha sido aclamada como una de las mejores novelas estadounidenses jamás escritas.
        Otras obras importantes de Fitzgerald incluyen "This Side of Paradise" (Esta del paraíso), su primera novela que lo catapultó a la fama, así como los relatos de la colección "Tales of the Jazz Age" que retratan vívidamente la vida frenética de la época.
        A pesar de su enorme talento literario, Fitzgerald luchó con el alcoholismo y problemas financieros durante gran parte de su vida. Su esposa, Zelda, también escritora, pasó largos períodos en instituciones mentales.
        Fitzgerald falleció prematuramente en 1940 a los 44 años, sin poder presenciar el reconocimiento póstumo de su obra maestra "El gran Gatsby" como un clásico imperecedero de la literatura norteamericana y universal.
        ');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (15, 15, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (29, 15, 'ESTANTERIA P', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (30, 15, 'ESTANTERIA P', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--LIBRO 16
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro "The Catcher in the Rye"
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (16, '9780316769488', 'The Catcher in the Rye', 'Holden Caulfield, un adolescente rebelde, es expulsado de su internado y decide pasar unos días solo en Nueva York antes de regresar a casa. A través de sus ojos, el lector experimenta su lucha contra la hipocresía del mundo adulto, su dolor por la muerte de su hermano menor, y su deseo de proteger la inocencia.'
        , 214, 'EN', 'ADO', 1951, 1, 13, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;

    l_bfile := BFILENAME('IMGPORTADAS', 'img16.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 16, 'J.D. Salinger', 'US', 'J.D. Salinger (1919-2010) fue un novelista y cuentista estadounidense, conocido principalmente por su novela "The Catcher in the Rye" (El guardián entre el centeno), que se ha convertido en un clásico de la literatura estadounidense del siglo XX.
        Nacido en Nueva York, Salinger sirvió en la Segunda Guerra Mundial, experiencia que influyó profundamente en su obra. Después de la guerra, se retiró a vivir una vida reclusa en Cornish, Nuevo Hampshire.
        Además de su famosa novela "El guardián entre el centeno" publicada en 1951, Salinger también escribió colecciones de cuentos aclamadas como "Nine Stories" y "Franny and Zooey". Sus historias a menudo exploraban temas de alienación, pérdida de la inocencia y la búsqueda de la verdad.
        Salinger fue muy reservado sobre su vida privada y se negó a publicar nuevos trabajos después de 1965. Sin embargo, su influencia en la literatura estadounidense y su estatus como un icono de la contracultura lo convirtieron en una de las figuras más enigmáticas y veneradas de su generación.
        A pesar de haber publicado una cantidad relativamente pequeña de obras, J.D. Salinger es considerado uno de los escritores más importantes del siglo XX, admirado por su prosa incisiva y su perspicaz comprensión de la condición humana.
        ');

    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (16, 16, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (31, 16, 'ESTANTERIA Q', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (32, 16, 'ESTANTERIA Q', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--LIBRO 17
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro "Fahrenheit 451"
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (17, '9780451526342', 'Fahrenheit 451', 'En un futuro distópico donde los libros están prohibidos y los bomberos queman cualquier libro que encuentren, Guy Montag es un bombero que empieza a cuestionar la sociedad represiva en la que vive. Su encuentro con una joven inquisitiva y su curiosidad sobre los libros lo llevan a un peligroso camino de autodescubrimiento y rebelión.'
        , 249, 'EN', 'DIS', 1953, 1, 14, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img17.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 17, 'Ray Bradbury', 'US', 'Ray Bradbury (1920-2012) fue un prolífico y aclamado escritor estadounidense, famoso por sus obras maestras de ciencia ficción y fantasía que exploraban temas profundos sobre la humanidad, la tecnología y el futuro.
        Nacido en Illinois, Bradbury encontró su pasión por la escritura desde muy joven y comenzó a publicar cuentos en revistas pulp a los 22 años. Su colección "The Martian Chronicles" (Crónicas marcianas) de 1950 lo consagró como una voz importante de la ciencia ficción.
        Sin embargo, su obra más conocida es la distópica novela "Fahrenheit 451" de 1953, una visionaria advertencia sobre la censura y la quema de libros en una sociedad futura. Esta profética historia se ha convertido en un clásico atemporal.
        Otras obras fundamentales de Bradbury incluyen "The Illustrated Man" (El hombre ilustrado), "Dandelion Wine" (Vino de pasas), "Something Wicked This Way Comes" (Algo malévolo por esta vía viene) y numerosos relatos memorables como "There Will Come Soft Rains" (Lloverán pómulas de mariposa).
        A lo largo de su extensa carrera de más de 70 años, Bradbury cultivó diversos géneros literarios con su inigualable imaginación y amor por la narración. Fue un pionero de la ciencia ficción que influyó a generaciones de escritores posteriores. Falleció en 2012 a los 91 años, dejando un legado imperecedero en la literatura.
        ');

    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (17, 17, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (33, 17, 'ESTANTERIA R', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (34, 17, 'ESTANTERIA R', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--LIBRO 18
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro "The Kite Runner"
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (18, '9780743247542', 'The Kite Runner', 'Amir, un joven de Kabul, crece en una época de turbulencia política en Afganistán. Su amistad con Hassan, el hijo del sirviente de su padre, se ve marcada por un trágico evento que lo persigue durante toda su vida. Años después, Amir regresa a su tierra natal para enfrentar su pasado y buscar la redención.'
        , 371, 'EN', 'HAF', 2003, 1, 15, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img18.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 18, 'Khaled Hosseini', 'US', 'Khaled Hosseini (1965) es un novelista afgano-estadounidense conocido por sus conmovedoras narraciones que reflejan la cultura afgana y las realidades políticas. Su debut, "The Kite Runner", fue un gran éxito y ha sido traducido a muchos idiomas');

    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (18, 18, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (35, 18, 'ESTANTERIA S', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (36, 18, 'ESTANTERIA S', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--LIBRO 19
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro "The Alchemist"
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (19, '9780062315007', 'The Alchemist', 'Una edición especial del 25 aniversario del extraordinario bestseller internacional, que incluye un nuevo prólogo de Paulo Coelho. Combinando magia, misticismo, sabiduría y asombro en una inspiradora historia de autodescubrimiento, The Alchemist se ha convertido en un clásico moderno, vendiendo millones de copias en todo el mundo y transformando las vidas de innumerables lectores a lo largo de generaciones. La obra maestra de Paulo Coelho cuenta la historia mística de Santiago, un pastor andaluz que anhela viajar en busca de un tesoro mundano. Su búsqueda lo llevará a riquezas muy diferentes (y mucho más satisfactorias) de lo que jamás imaginó. El viaje de Santiago nos enseña la sabiduría esencial de escuchar nuestro corazón, de reconocer las oportunidades y aprender a leer los presagios esparcidos a lo largo del camino de la vida y, lo más importante, de seguir nuestros sueños.'
        , 208, 'EN', 'ESP', 2014, 1, 1, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img19.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 19, 'Paulo Coelho', 'BR', 'Uno de los escritores más influyentes de nuestro tiempo, es autor de treinta bestsellers internacionales, entre ellos El alquimista, El guerrero de la luz, Brida, Veronika decide morir y Once minutos. Es miembro de la Academia Brasileña de Letras y Mensajero de la Paz de las Naciones Unidas. Paulo ha recibido 115 premios y reconocimientos internacionales, entre ellos, el Chevalier de l Ordre National de la Légion d Honneur (Legión de Honor). Nacido en Río de Janeiro en 1947, pronto descubrió su vocación por la escritura. Trabajó como director, actor de teatro, compositor y periodista. En 1986, un encuentro especial lo llevó a peregrinar a Santiago Compostela (en España). El Camino de Santiago no fue sólo una peregrinación común sino un punto de inflexión en su existencia. Un año después, escribió La peregrinación, novela autobiográfica que se considera el inicio de su carrera literaria. Vive en Ginebra, Suiza.');

    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (19, 19, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (37, 19, 'ESTANTERIA T', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (38, 19, 'ESTANTERIA T', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--LIBRO 20
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro "House of Leaves"
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (20, '9780375703768', 'House of Leaves: The Remastered', 'Hace años, cuando House of Leaves se difundió por primera vez, no era más que un montón de papeles mal empaquetados, partes del cual ocasionalmente aparecían en Internet. Nadie podría haber anticipado que los pequeños pero devotos seguidores de esta aterradora historia pronto dominarían. Comenzando con una extraña variedad de jóvenes marginados (músicos, tatuadores, programadores, strippers, ambientalistas y adictos a la adrenalina), el libro finalmente llegó a manos de generaciones mayores, quienes no solo se encontraron en esas páginas extrañamente dispuestas sino que también descubrieron un camino de regreso a las vidas de sus hijos separados. Ahora disponible en forma de libro, completo con las palabras originales en colores, notas verticales al pie y el segundo y tercer apéndices, la historia permanece sin cambios. De manera similar, la fascinación cultural por House of Leaves sigue siendo tan ferviente e imaginativa como siempre. La novela ha inspirado cursos de doctorado y tesis de maestría, fenómenos culturales como la leyenda urbana en línea de “las trastiendas” e increíbles obras de arte en medios totalmente irreales, desde la música hasta los videojuegos. Ni el fotoperiodista ganador del Premio Pulitzer Will Navidson ni su compañera Karen Green estaban preparados para afrontar las consecuencias de la imposibilidad de su nuevo hogar, hasta el día en que sus dos hijos pequeños se alejaron y sus voces inquietantemente comenzaron a contar otra historia: la de la oscuridad de las criaturas. de un abismo cada vez mayor detrás de la puerta de un armario, y de ese gruñido impío que muy pronto atravesaría sus paredes y consumiría todos sus sueños.'
        , 736, 'EN', 'FXE', 2000, 2, 17, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img20.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES( 20, 'Mark Z. Danielewski', 'ES','Mark Z. Danielewski es un escritor estadounidense reconocido por sus innovadoras novelas experimentales. Nació en 1966 en Nueva York. Se graduó de Universidad de Yale y luego se doctoró en Filología Inglesa en Harvard.
        Alcanzó fama con su debut novelístico "House of Leaves" en 2000, una obra laberíntica con múltiples narraciones entrelazadas y un diseño tipográfico único que juega con el formato del libro. Esta novela recibió elogios de la crítica por su audacia experimental.
        Después publicó otras novelas igual de innovadoras como "Only Revolutions" en 2006, que consiste en dos narraciones contrapuestas impresas de manera invertida en los extremos del libro. En 2015 lanzó "The Familiar Volume 1", primera entrega de una ambiciosa serie planeada en 27 volúmenes.
        Danielewski es conocido por su enfoque vanguardista que desafía las convenciones narrativas y la concepción tradicional del libro. Sus obras exploran temas existenciales y la relación entre texto e imagen de maneras muy creativas. Es considerado uno de los autores más innovadores de la literatura contemporánea.
        ');

    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (20, 20, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (39, 20, 'ESTANTERIA U', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (40, 20, 'ESTANTERIA U', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--Libro 21
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (21, '9780060850524', 'Brave New World', 'El profundamente importante clásico de la literatura mundial de Aldous Huxley, Un mundo feliz, es una visión inquisitiva de un futuro desigual y tecnológicamente avanzado en el que los humanos son criados genéticamente, adoctrinados socialmente y anestesiados farmacéuticamente para defender pasivamente un orden gobernante autoritario, todo a costa de nuestra la libertad, la humanidad plena y quizás también nuestras almas. “Un genio [que] pasó su vida denunciando el avance de la Máquina” (The New Yorker), Huxley era un hombre de talentos incomparables: igualmente un artista, un buscador espiritual y uno de los más agudos observadores de la naturaleza humana y la historia. civilización. Un mundo feliz, su obra maestra, ha cautivado y aterrorizado a millones de lectores, y conserva su relevancia urgente hasta el día de hoy como una advertencia a la que debemos prestar atención a medida que nos acercamos al mañana y como una obra literaria satisfactoria y que invita a la reflexión. Escrito a la sombra del ascenso del fascismo durante la década de 1930, Un mundo feliz también habla de un mundo del siglo XXI dominado por el entretenimiento de masas, la tecnología, la medicina y los productos farmacéuticos, las artes de la persuasión y la influencia oculta de las élites.'
        , 288, 'EN', 'DIS', 2006, 1, 18, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img21.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES(21, 'Aldous Huxley', 'EN', 'Aldous Huxley (1894-1963) fue un escritor e intelectual británico, uno de los ensayistas más brillantes del siglo XX. Nació en una familia de tradición intelectual, siendo nieto del biólogo Thomas Huxley. A pesar de quedar casi ciego a los 16 años por una enfermedad, Huxley logró un amplio conocimiento en diversos campos como la literatura, filosofía, ciencias y misticismo. Su novela más famosa es "Un mundo feliz" (1932), una distopía futurista que advierte sobre los peligros de un totalitarismo tecnológico y la estandarización de la sociedad. Esta influyente obra lo consolidó como uno de los grandes pensadores modernos. Otras novelas conocidas son "Contrapunto" (1928), una sátira de la sociedad moderna, y "La isla" (1962), una utopía que contrasta con "Un mundo feliz" al explorar una sociedad ideal basada en valores humanistas. Como ensayista, destacan obras como "La filosofía perenne" donde analiza las tradiciones místicas de Oriente y Occidente. También cultivó la poesía y relatos cortos. Huxley fue un crítico lúcido de las sociedades industrializadas y un gran humanista interesado en el potencial humano. Su legado literario e intelectual sigue influyendo en el pensamiento contemporáneo.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (21, 21, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (41, 21, 'ESTANTERIA V', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (42, 21, 'ESTANTERIA V', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


--Libro 22
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (22, '9780385490818', 'The Handmaid s Tale', 'En el futuro distópico de Margaret Atwood, los desastres ambientales y la disminución de las tasas de natalidad han llevado a una Segunda Guerra Civil estadounidense. El resultado es el surgimiento de la República de Gilead, un régimen totalitario que impone roles sociales rígidos y esclaviza a las pocas mujeres fértiles que quedan. Defred es uno de ellos, una sirvienta destinada a engendrar hijos para uno de los comandantes de Gilead. Privada de su marido, de su hijo, de su libertad e incluso de su propio nombre, Offred se aferra a sus recuerdos y a su voluntad de sobrevivir. Al mismo tiempo una sátira mordaz, una advertencia siniestra y un tour de force de suspenso narrativo, The Handmaid s Tale es un clásico moderno.'
        , 311, 'EN', 'FEM', 1998, 1, 19, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img22.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES(22, 'Margaret Atwood', 'CA', 'Margaret Atwood es autora de más de cincuenta libros de ficción, poesía y ensayos críticos. Sus novelas incluyen Cat''s Eye, The Robber Bride, Alias Grace, The Blind Assassin y la trilogía MaddAddam. Su clásico de 1985, The Handmaid''s Tale, volvió a las listas de bestsellers con la elección de Donald Trump, cuando Las Criadas se convirtieron en un símbolo de resistencia contra el desempoderamiento de las mujeres, y con el lanzamiento en 2017 de la galardonada serie de televisión Channel 4. Su secuela, The Testaments, se publicó en 2019. Fue un éxito de ventas internacional instantáneo y ganó el Premio Booker. Atwood ha ganado numerosos premios, incluido el Premio Booker, el Premio Arthur C. Clarke a la imaginación al servicio de la sociedad, el Premio Franz Kafka, el Premio de la Paz del Comercio Librero Alemán y el Premio PEN USA Lifetime Achievement Award. En 2019 fue nombrada miembro de la Orden de los Compañeros de Honor por sus servicios a la literatura. También ha trabajado como dibujante, ilustradora, libretista, dramaturga y titiritera. Vive en Toronto, Canadá.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (22, 22, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (43, 22, 'ESTANTERIA W', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (44, 22, 'ESTANTERIA W', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/

--Libro 23
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (23, '9780312427733', 'Middlesex: A Novel', 'Un triunfo deslumbrante del autor del best seller Las vírgenes suicidas: la asombrosa historia de un gen que se transmite a través de tres generaciones de una familia greco-estadounidense y florece en el cuerpo de una adolescente. "Nací dos veces: primero, cuando era niña, en un día notablemente libre de contaminación en Detroit, en enero de 1960; y luego, nuevamente, cuando era adolescente, en una sala de urgencias cerca de Petoskey, Michigan, en agosto de 1974... Mi nacimiento El certificado indica mi nombre como Calliope Helen Stephanides. Mi licencia de conducir más reciente... registra mi nombre simplemente como Cal". Así comienza la impresionante historia de Calliope Stephanides y tres generaciones de la familia greco-estadounidense Stephanides que viajan desde un pequeño pueblo con vista al Monte Olimpo en Asia Menor hasta Detroit en la era de la Prohibición, presenciando sus días de gloria como la Ciudad del Motor y los disturbios raciales de 1967, antes de mudarse a las calles arboladas del suburbio de Grosse Pointe, Michigan. Para entender por qué Calliope no es como las demás chicas, tiene que descubrir un secreto familiar culpable y la asombrosa historia genética que convierte a Callie en Cal, una de las narradoras más audaces y maravillosas de la ficción contemporánea. Lírica y emocionante, Middlesex de Jeffrey Eugenides es una estimulante reinvención de la epopeya estadounidense.'
        , 544, 'EN', 'IDN', 2002, 1, 20, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img23.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES(23, 'Jeffrey Eugenides', 'ES', 'Jeffrey Eugenides nació en 1960 en Detroit, Michigan, Estados Unidos. Es un novelista y profesor de escritura creativa estadounidense de origen greco-irlandés. Estudió en las universidades de Brown, Stanford y fue becario de la Universidad de Syracuse. Trabajó como empleado de mudanzas y taxista antes de dedicarse por completo a la escritura. Se dio a conocer en 1993 con su primera novela "Las vírgenes suicidas", un relato oscuro y tragicómico sobre cinco hermanas adolescentes que deciden quitarse la vida. Esta obra se convirtió en un fenómeno de culto. En 2002 publicó su aclamada segunda novela "Middlesex", una épica familiar ambientada en la comunidad griega de Detroit a lo largo del siglo XX. Narrada por un protagonista intersexual, explora temas de identidad, inmigración y herencia genética. Por esta obra ganó el prestigioso Premio Pulitzer de Ficción en 2003. Su tercera y más reciente novela es "La trama nupcial" de 2011, donde realiza una disección de las relaciones matrimoniales y el papel de los sexos en la sociedad contemporánea. Eugenides es reconocido por su prosa rica en detalles, su agudo sentido del humor y su habilidad para crear personajes profundamente humanos y conmovedores. Es considerado uno de los grandes narradores estadounidenses de su generación.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (23, 23, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (45, 23, 'ESTANTERIA X', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (46, 23, 'ESTANTERIA X', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


--Libro 24
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (24, '9780375842207', 'The Book Thief', 'La extraordinaria y querida novela sobre la capacidad de los libros para alimentar el alma incluso en los tiempos más oscuros. Cuando la Muerte tiene una historia que contar, la escuchas. Es el año 1939. La Alemania nazi. El país está conteniendo la respiración. La muerte nunca ha estado más ocupada y estará más ocupada aún. Liesel Meminger es una niña adoptiva que vive en las afueras de Múnich y que se gana la vida robando cuando encuentra algo a lo que no puede resistirse: libros. Con la ayuda de su padre adoptivo, que toca el acordeón, aprende a leer y comparte sus libros robados con sus vecinos durante los bombardeos, así como con el judío escondido en su sótano. En una escritura magníficamente elaborada que arde con intensidad, el galardonado autor Markus Zusak, autor de Soy el mensajero, nos ha brindado una de las historias más perdurables de nuestro tiempo. "El tipo de libro que puede cambiar la vida". Los New York Times “Merece un lugar en el mismo estante que El diario de una joven de Ana Frank”. EE.UU. Hoy en día'
        , 608, 'EN', 'SGM', 2007, 1, 21, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img24.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES(24, 'Markus Zusak', 'AU', 'Markus Zusak nació en 1975 en Sídney, Australia. Proviene de una familia de inmigrantes alemanes y austriacos. Se dio a conocer a nivel mundial en 2005 con la publicación de su novela juvenil "La ladrona de libros", ambientada en la Alemania nazi durante la Segunda Guerra Mundial. Esta cautivadora historia narrada por la Muerte sigue a una niña que roba libros como refugio para sobrevivir a los horrores del conflicto bélico. La novela se convirtió en un fenómeno de ventas mundial, superando las 16 millones de copias vendidas y siendo traducida a más de 60 idiomas. Obtuvo numerosos galardones y fue llevada al cine en una película de 2013. Antes de su gran éxito, Zusak publicó otras novelas juveniles como "La mensajera" en 2002 y "Peleador callejero" en 1998. Esta última narra las vivencias de dos hermanos criados por una madre soltera. En sus historias, Zusak aborda temas profundos como el sufrimiento humano, el poder sanador de los libros y la búsqueda de la dignidad en medio de situaciones adversas. Su prosa poética y conmovedora ha cautivado a millones de lectores. Actualmente, Markus Zusak sigue escribiendo y es considerado uno de los autores juveniles más destacados de las últimas décadas a nivel internacional.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (24, 24, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (47, 24, 'ESTANTERIA Y', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (48, 24, 'ESTANTERIA Y', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/


--Libro 25
DECLARE
    l_bfile BFILE;
    l_blob BLOB;
BEGIN
    -- Insertar información del libro
    INSERT INTO libros (idlibro, isbm, titulo, sinopsis, numpaginas, idioma, codarea, anio, nroedicion, idedit, imgpotada)
    VALUES (25, '9786073184458', 'Lugares asombrosos: Travesías insólitas y otras maneras extrañas de conocer al mundo', 'En "Lugares asombrosos", el conocido viajero y aventurero Luisito Comunica nos invita a un recorrido por los rincones más extraordinarios e insólitos del planeta. A través de relatos cautivadores y fotografías impresionantes, nos sumerge en un mundo de maravillas naturales, culturas fascinantes y experiencias tan singulares como desconcertantes. La aventura comienza con el enigmático "Desierto de las Pirámides Enterradas", donde Luisito explora antiguas estructuras que emergen misteriosamente de las arenas del desierto. Luego, nos lleva a la remota "Isla de los Cangrejos Rojos", un paraíso intacto donde millones de crustáceos cubren cada centímetro de las playas en un espectáculo natural hipnótico. En "La Cueva de los Cristales Gigantes", Luisito se adentra en una asombrosa caverna subterránea donde se encuentran algunos de los cristales más grandes del mundo, formaciones milenarias que desafían la imaginación. Mientras tanto, en "El Bosque Encantado" descubrimos un lugar donde los árboles cobran vida con formas retorcidas y figuras antropomórficas talladas por el viento. Pero los viajes de Luisito no se limitan a maravillas naturales. También explora culturas únicas como la de los "Cabezas Alargadas", donde conoce a una tribu que practica la antigua costumbre de deformar sus cráneos desde el nacimiento. Y en "La Ciudad Subterránea", se aventura en un vasto laberinto de túneles y cámaras excavados bajo una populosa metrópoli moderna. A lo largo de sus páginas cautivadoras, "Lugares asombrosos" nos transporta a un mundo de belleza y misterio, invitándonos a ver nuestro planeta desde una nueva perspectiva y a embarcarnos en travesías que desafían nuestras nociones convencionales de viajar.'
        , 280, 'ES', 'VIA', 2020, 1, 22, EMPTY_BLOB()) RETURNING imgpotada INTO l_blob;
    
    l_bfile := BFILENAME('IMGPORTADAS', 'img25.jpeg'); -- Obtener la referencia al archivo BFILE
    DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);  -- Abrir el archivo BFILE
    DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));     -- Cargar el contenido del archivo BFILE en el BLOB
    DBMS_LOB.fileclose(l_bfile); -- Cerrar el archivo BFILE

    -- Insertar autor
    INSERT INTO autores (idautor, nombreautor, pais, bio) 
    VALUES(25, 'Luis Arturo Villar Sudek', 'ME', 'Luisito Comunica es el pseudónimo de Luis Arturo Villar Sudek (Puebla, México, 1991), el contador de historias más querido de Hispanoamérica. Con su particular estilo desenfadado, Luisito muestra su encantadora personalidad transmitiendo sus aventuras alrededor del mundo con un balance perfecto entre datos curiosos, bromas y reflexiones, que hacen de cada uno de sus videos una experiencia adictiva para todo el que los vea. Los más de 131 millones de seguidores en todas sus plataformas digitales lo han llevado a recibir distintos reconocimientos alrededor del mundo y a ser considerado como uno de los creadores más grandes de YouTube en español.');
    
    -- Insertar autoría
    INSERT INTO autorias (idlibro, idautor, orden)
    VALUES (25, 25, 1);
    
    -- Insertar ejemplares
    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (49, 25, 'ESTANTERIA Z', 'D');

    INSERT INTO ejemplares (idejemplar, idlibro, ubicacion, status)
    VALUES (50, 25, 'ESTANTERIA Z', 'B');

    COMMIT;
    
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
        RAISE;
END;
/



--Conceder permisos a usuarios
-- Permisos para Usuario 1: Oliver
GRANT SELECT ON grupal_2.libros_con_autor_principal TO oliver;
-- Permisos para Usuario 2: Denis
GRANT SELECT ON grupal_2.prestamos_ordenados_recientes TO denis;
-- Permisos para Usuario 3: Augusto
GRANT SELECT, INSERT, UPDATE, DELETE ON usuarios TO augusto;
GRANT INSERT ON prestamos TO augusto;
GRANT UPDATE ON prestamos TO augusto;
GRANT SELECT ON prestamos TO augusto;

-- VISTAS (lista de libros con su autor principal) Y (lista de préstamos ordenados desde el más reciente).

CREATE OR REPLACE VIEW libros_con_autor_principal AS
SELECT 
    l.idlibro,
    l.titulo,
    l.isbm,
    l.numpaginas,
    l.idioma,
    l.codarea,
    l.anio,
    l.nroedicion,
    l.idedit,
    a.idautor,
    a.nombreautor,
    a.pais
FROM 
    libros l
JOIN 
    autorias ar ON l.idlibro = ar.idlibro
JOIN 
    autores a ON ar.idautor = a.idautor
WHERE 
    ar.orden = (SELECT MIN(orden) FROM autorias ar_sub WHERE ar_sub.idlibro = l.idlibro);

CREATE OR REPLACE VIEW prestamos_ordenados_recientes AS
SELECT 
    p.idprestamo,
    p.idejemplar,
    e.idlibro,
    l.titulo,
    p.cedula,
    u.apellidos,
    u.nombres,
    p.fechaprestamo,
    p.fechavencimiento,
    p.fechadevolucion,
    p.observacion
FROM 
    prestamos p
JOIN 
    ejemplares e ON p.idejemplar = e.idejemplar
JOIN 
    libros l ON e.idlibro = l.idlibro
JOIN 
    usuarios u ON p.cedula = u.cedula
ORDER BY 
    p.fechaprestamo DESC;



-- Inserción de datos en la tabla usuarios
BEGIN
    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('1234567890', 'Pérez', 'Juan', 'Calle Falsa 123', '555-1234', NULL, NULL, 'juan.perez@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('0987654321', 'González', 'Ana', 'Avenida Siempre Viva 742', '555-5678', '555-8765', NULL, 'ana.gonzalez@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('1122334455', 'Martínez', 'Carlos', 'Boulevard de los Sueños Rotos 456', '555-3456', NULL, NULL, 'carlos.martinez@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('5566778899', 'López', 'María', 'Calle Luna, Calle Sol', '555-7890', '555-0987', '555-6543', 'maria.lopez@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('1234509876', 'Rodríguez', 'Luis', 'Pasaje de la Rosa 321', '555-4321', NULL, NULL, 'luis.rodriguez@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('9876543210', 'Fernández', 'Sofía', 'Avenida de los Insurgentes 789', '555-8765', '555-4321', NULL, 'sofia.fernandez@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('5678901234', 'García', 'Jorge', 'Callejón del Beso 101', '555-1234', '555-5678', NULL, 'jorge.garcia@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('3456789012', 'Ramírez', 'Elena', 'Plaza Mayor 202', '555-3456', NULL, NULL, 'elena.ramirez@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('2109876543', 'Torres', 'Diego', 'Callejón de la Llama 303', '555-7890', '555-0987', '555-6543', 'diego.torres@example.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email) 
    VALUES ('6543210987', 'Morales', 'Isabel', 'Calle de la Amargura 404', '555-4321', NULL, NULL, 'isabel.morales@example.com');
    
    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('1267364829', 'Criollo', 'Pablo', 'Avenida Cuxibamba', '0923456728', NULL, NULL, 'pabloC@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('2342428647', 'Saraguro', 'Oliver', 'Miguel Riofrio y Mercadillo', '0991234567', NULL, NULL, 'oliversar@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('4387924524', 'Ruiz', 'Dennis', 'Av. Occidental Viva 123', '0992344554', NULL, NULL, 'coqueteDennis@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('2384096775', 'Robles', 'Agusto', '24 de Mayo y Lourdes', '0991249995', '0934252433', NULL, 'agustoRobles@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('3629182736', 'Maldonado', 'Carla', 'Calle Bolívar', '0987654321', NULL, NULL, 'carlaM@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('4719273645', 'Jimenez', 'Sofia', 'Calle Lourdes', '0976543210', NULL, NULL, 'sofiaJ@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('5291827364', 'Gonzalez', 'Mateo', 'Calle 18 de Noviembre', '0965432109', NULL, NULL, 'mateoG@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('6819273645', 'Herrera', 'Laura', 'Calle Sucre', '0954321098', NULL, NULL, 'lauraH@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('7928374651', 'Martinez', 'Luis', 'Calle Bernardo Valdivieso', '0943210987', NULL, NULL, 'luisM@google.com');

    INSERT INTO usuarios (cedula, apellidos, nombres, direccion, telefono1, telefono2, telefono3, email)
    VALUES ('8937462518', 'Flores', 'Ana', 'Calle Universitaria', '0932109876', NULL, NULL, 'anaF@google.com');
    
    COMMIT;
EXCEPTION WHEN OTHERS THEN
    ROLLBACK;
    RAISE;
END;
/

BEGIN
    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (1, 2, '1234567890', TO_DATE('2024-01-01', 'YYYY-MM-DD'), TO_DATE('2024-01-15', 'YYYY-MM-DD'), TO_DATE('2024-01-10', 'YYYY-MM-DD'), 'Devolución antes de la fecha de vencimiento');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (2, 3, '0987654321', TO_DATE('2024-02-01', 'YYYY-MM-DD'), TO_DATE('2024-02-15', 'YYYY-MM-DD'), TO_DATE('2024-02-14', 'YYYY-MM-DD'), 'Devolución justo a tiempo');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (3, 4, '1122334455', TO_DATE('2024-03-01', 'YYYY-MM-DD'), TO_DATE('2024-03-15', 'YYYY-MM-DD'), TO_DATE('2024-03-12', 'YYYY-MM-DD'), 'Devolución anticipada');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (4, 5, '5566778899', TO_DATE('2024-04-01', 'YYYY-MM-DD'), TO_DATE('2024-04-15', 'YYYY-MM-DD'), TO_DATE('2024-04-10', 'YYYY-MM-DD'), 'Devolución en buenas condiciones');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (5, 6, '1234509876', TO_DATE('2024-05-01', 'YYYY-MM-DD'), TO_DATE('2024-05-15', 'YYYY-MM-DD'), TO_DATE('2024-05-14', 'YYYY-MM-DD'), 'Préstamo sin incidentes');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (6, 7, '9876543210', TO_DATE('2024-06-01', 'YYYY-MM-DD'), TO_DATE('2024-06-15', 'YYYY-MM-DD'), TO_DATE('2024-06-10', 'YYYY-MM-DD'), 'Devolución rápida');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (7, 8, '5678901234', TO_DATE('2024-07-01', 'YYYY-MM-DD'), TO_DATE('2024-07-15', 'YYYY-MM-DD'), TO_DATE('2024-07-12', 'YYYY-MM-DD'), 'Devolución sin comentarios');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (8, 9, '3456789012', TO_DATE('2024-08-01', 'YYYY-MM-DD'), TO_DATE('2024-08-15', 'YYYY-MM-DD'), TO_DATE('2024-08-14', 'YYYY-MM-DD'), 'Buen estado del libro');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (9, 10, '2109876543', TO_DATE('2024-09-01', 'YYYY-MM-DD'), TO_DATE('2024-09-15', 'YYYY-MM-DD'), TO_DATE('2024-09-10', 'YYYY-MM-DD'), 'Devolución rápida y segura');

    INSERT INTO prestamos (idprestamo, idejemplar, cedula, fechaprestamo, fechavencimiento, fechadevolucion, observacion) 
    VALUES (10, 11, '6543210987', TO_DATE('2024-10-01', 'YYYY-MM-DD'), TO_DATE('2024-10-15', 'YYYY-MM-DD'), TO_DATE('2024-10-12', 'YYYY-MM-DD'), 'Ningún problema reportado');
    
    COMMIT;
EXCEPTION WHEN OTHERS THEN
    ROLLBACK;
    RAISE;
END;
/


